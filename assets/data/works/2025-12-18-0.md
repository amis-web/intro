# イベント概要

地域の子どもたちとボードゲームを通じた交流イベントを開催しました。

30名以上の子どもたちが参加し、様々なボードゲームを楽しみました。

## イベントの様子

初対面の子どもたち同士でもすぐに打ち解け、笑顔があふれる1日となりました。

## 参加者の声

- 「いろんなゲームができて楽しかった！」（小学3年生）
- 「新しい友達ができました」（小学5年生）
# Git 運用ガイドライン

本プロジェクトでは，品質の高いコードを安定してリリースするために，以下の Git ブランチ戦略を採用します．
チーム全員がこのフローを遵守することで，手戻りのない効率的な開発を目指します．

---

## 1. ブランチ戦略の概要

本プロジェクトでは，以下のブランチを役割に応じて使い分けます．

### メインブランチ

| ブランチ名 | 役割 | 権限・ルール |
| :--- | :--- | :--- |
| **`main`** | **本番環境 (Production)**<br>常にリリース可能な安定した状態を保ちます． | **Commit / Push 禁止**<br>原則として `dev` または `hotfix/*` からの PR マージのみで更新します． |
| **`dev`** | **開発検証環境 (Staging)**<br>次期リリースのための統合ブランチです．機能開発が完了したらここにマージします． | **Commit / Push 可能**<br>基本的には作業ブランチからの PR マージで更新しますが，軽微な修正等は直接 Push も許容できます． |

### 作業ブランチ

| ブランチ名 | 用途 | 例 |
| :--- | :--- | :--- |
| **`feature/*`** | 新機能の追加や改善 | `feature/12-user-profile` |
| **`fix/*`** | 開発中に発見されたバグの修正 | `fix/15-login-error` |
| **`hotfix/*`** | 本番環境の緊急バグ修正<br> `main` から分岐 → `main` と `dev` 両方にマージ | `hotfix/critical-payment-bug` |
| **`db/*`** | DBスキーマ変更・マイグレーション | `db/add-orders-table` |
| **`refactor/*`** | ディレクトリ構造変更・大規模なコード整理 | `refactor/reorganize-api-structure` |
| **`other/*`** | その他の変更（AIコマンドやAGENTS.mdの追加・変更など） | `other/new_cursor_commands` |

### 命名規則

```
<prefix>/<issue番号>-<簡潔な説明>
```

- **issue番号がある場合**: `feature/12-user-profile`
- **issue番号がない場合**: `hotfix/critical-payment-bug`

### ブランチフロー早見表

| プレフィックス | 分岐元 | マージ先 |
| :--- | :--- | :--- |
| `feature/` | `dev` | `dev` |
| `fix/` | `dev` | `dev` |
| `hotfix/` | **`main`** | **`main` + `dev`** |
| `db/` | `dev` | `dev` |
| `refactor/` | `dev` | `dev` |

```mermaid
gitGraph
   commit id: "init"
   branch dev
   checkout dev
   commit id: "start-dev"

   branch feature/12-user-profile
   commit id: "feat-work"
   checkout dev
   merge feature/12-user-profile id: "merge-feature"

   branch db/add-orders-table
   commit id: "db-migration"
   checkout dev
   merge db/add-orders-table id: "merge-db"

   checkout main
   merge dev id: "release-v1.0" tag: "v1.0.0"

   branch hotfix/critical-bug
   commit id: "emergency-fix"
   checkout main
   merge hotfix/critical-bug id: "hotfix-to-main" tag: "v1.0.1"
   checkout dev
   merge hotfix/critical-bug id: "hotfix-to-dev"
```

---

## 2. 開発フロー詳細

日々の開発は，基本的に以下のサイクルで行います．

### Step 1: 最新の `dev` を取得する

作業を始める前に，必ず `dev` ブランチを最新の状態にします．

```bash
# dev ブランチに切り替え
git checkout dev

# リモートの最新情報を取得
git pull origin dev
```

### Step 2: 作業用ブランチの作成

`dev` ブランチから，新しい作業用ブランチを作成します．
作業内容に応じて適切なプレフィックスを選択してください．

```bash
# 機能追加の場合
git checkout -b feature/12-user-profile

# バグ修正の場合
git checkout -b fix/15-login-error

# DB変更の場合
git checkout -b db/add-orders-table

# リファクタリングの場合
git checkout -b refactor/reorganize-api-structure
```

### Step 3: 実装とコミット

コードを編集し，変更をコミットします．
こまめにコミットすることで，作業履歴が追いやすくなります．

```bash
# 変更ファイルをステージング
git add .

# コミット（メッセージは具体的に）
git commit -m "feat: 企業カードの表示"
```

> **Tip**: コミットメッセージのプレフィックス
> - `feat:` 新機能の追加
> - `fix:` バグの修正
> - `docs:` ドキュメントのみの変更
> - `refactor:` 出力結果が変わらないコード改善
> - `db:` データベース関連の変更
> - `chore:` 開発環境に関する変更

### Step 4: リモートへプッシュ

作業が一区切りついたら，リモートリポジトリへプッシュします．

```bash
# 初回プッシュ時（上流ブランチを設定）
git push origin feature/12-user-profile
```

### Step 5: プルリクエスト (PR) の作成

機能の実装が完了したら，`dev` ブランチへ取り込むためにプルリクエストを作成します．
（GitHub / GitLab 等の画面上で操作します）

1. **Base (マージ先)**: `dev`
2. **Compare (マージ元)**: `feature/12-user-profile`
3. **タイトル**: 作業内容を簡潔に（生成AIで書いてもOK．楽になる仕組みを考えたいです）
4. **説明**: 変更点，確認してほしいポイントなどを記載（生成AIで書いてもOK）

### Step 6: レビューとマージ

チームメンバーによるコードレビューを受けます．修正が必要な場合は Step 3〜4 を繰り返します．
承認されたら，`dev` ブランチへマージします．

---

## 3. 作業ブランチの最新化（devの取り込み）

開発が進むと，他のメンバーの変更が `dev` ブランチにマージされていきます．
しかし，**誰かが `dev` を更新しても，あなたの手元の作業ブランチは自動的には更新されません**．

そのため，以下のタイミングで**自ら最新の `dev` を取り込む作業**を行う必要があります．

- **推奨タイミング**:
  1. その日の作業を始めるとき
  2. 自分の作業が一段落して，コミットした後
  3. プルリクエストを出す直前

### 具体的な手順

以下の2ステップで，安全に最新の状態を取り込むことができます．

#### Step 1: 手元の `dev` を最新にする

まず，ローカルの `dev` ブランチをリモートの最新状態に更新します．

```bash
# 1. dev ブランチに移動
git checkout dev

# 2. リモートの最新情報を dev に持ってくる
git pull origin dev
```

> **Note**: この時点では，手元の `dev` が最新になっただけで，**作業中のブランチはまだ古いまま**．

#### Step 2: 最新の `dev` を作業ブランチにマージする

最新になった `dev` の内容を，作業中のブランチに取り込みます．

```bash
# 1. 自分の作業ブランチに戻る
git checkout feature/12-user-profile

# 2. 最新の dev を今のブランチに取り込む（マージ）
git merge dev
```

これで，作業中のブランチに他のメンバーの変更（最新の `dev`）が反映されます．
もしコンフリクト（競合）が発生した場合は，[トラブルシューティング](#6-トラブルシューティング)を参照してください．

---

## 4. リリースフロー (`dev` → `main`)

`dev` ブランチで十分にテストが行われ，本番環境へリリースする準備が整ったら，`main` ブランチへ反映します．

1. **PR 作成**: `dev` から `main` へのプルリクエストを作成します．
2. **最終確認**: ステージング環境等で動作に問題がないか確認します．
3. **マージ**: `main` へマージし，本番環境へデプロイします．

---

## 5. 緊急修正フロー（Hotfix）

本番環境で緊急のバグが発見された場合，通常の開発フローを待たずに修正をリリースします．

```mermaid
gitGraph
   commit id: "v1.0.0" tag: "v1.0.0"
   branch hotfix/critical-bug
   commit id: "emergency-fix"
   checkout main
   merge hotfix/critical-bug id: "release" tag: "v1.0.1"
```

### 手順

#### Step 1: `main` から hotfix ブランチを作成

```bash
git checkout main
git pull origin main
git checkout -b hotfix/critical-bug-description
```

#### Step 2: 修正をコミット・プッシュ

```bash
git add .
git commit -m "hotfix: 緊急バグの修正"
git push origin hotfix/critical-bug-description
```

#### Step 3: `main` へ PR を作成してマージ

- **最優先でレビュー**を行い，承認後すぐにマージします．
- マージ後，本番環境へデプロイします．

#### Step 4: `dev` へも同じ修正を反映

hotfix の修正が `dev` に漏れないよう，必ず `dev` にもマージします．

```bash
git checkout dev
git pull origin dev
git merge hotfix/critical-bug-description
git push origin dev
```

> **重要**: hotfix を `dev` にマージし忘れると，次回リリース時に同じバグが再発します．

---

## 6. トラブルシューティング

### コンフリクト（競合）が発生した場合

`dev` ブランチが他の人の変更で進んでしまい，自分のブランチと競合することがあります．
その場合は，自分のブランチに最新の `dev` を取り込んで解消します．

```bash
# 自分のブランチにいる状態で実行
git pull origin dev

# コンフリクトが発生したファイルが表示されるので，エディタで修正する
# 修正後，再度 add と commit を行う
git add <修正したファイル>
git commit -m "merge: devとのコンフリクトを解消"
git push
```